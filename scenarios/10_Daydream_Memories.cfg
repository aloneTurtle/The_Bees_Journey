#textdomain wesnoth-The_Bees_Journey

# wmllint: local spellings spectre

[scenario]
    id=10_Daydream_Memories
    name= _ "Daydream Memories"

    next_scenario=11_Mother_in_the_Eyelids
    map_file=10_Daydream_Memories_01.map

    victory_when_enemies_defeated=no

    turns=18
    {DEFAULT_SCHEDULE}

    {INTRO_AND_SCENARIO_MUSIC "revelation.ogg" "weight_of_revenge.ogg"}
    {EXTRA_SCENARIO_MUSIC "heroes_rite.ogg"}
    {EXTRA_SCENARIO_MUSIC "siege_of_laurelmor.ogg"}

    [story]
        [part]
            story= _ "Since arriving on Gapas Island, Marie had been haunted by the same thought. Why had so much blood been spilled, so many lives lost? Why had the bees and ants, even the hornets, had to be sacrificed? As if destined to dwell on these questions, she kept asking herself over and over."
        [/part]
        [part]
            story= _ "<i>“What, after all, does the end of my journey truly signify?”</i>"
            show_title=yes
        [/part]
    [/story]

    [side]
        side=1
        controller=human
        team_name=heroes
        user_team_name= _ "team_name^Marie"

        type=Princess Bee
        id=Marie
        name= _ "Marie"
        unrenamable=yes
        canrecruit=yes

        recruit=Bee,Drone

        {FLAG_VARIANT long}
        {GOLD 160 140 120}
        {INCOME 6 4 2}
    [/side]

#define HORNET_AI RECRUITMENT_PATTERN
    [ai]
        grouping=offensive
        aggression=0.8
        caution=0.2
        recruitment_pattern={RECRUITMENT_PATTERN}
        [goal]
            name=target
            [criteria]
                id=Marie
            [/criteria]
            value=8
        [/goal]
    [/ai]
#enddef

    [side]
        side=2
        controller=ai
        team_name=enemies
        user_team_name= _ "team_name^Hornets"

        type=Great Hornet
        id=Rudie
        name= _ "Rudie"
        canrecruit=yes

        recruit=Assault Hornet,Ghost,Wraith,Hornet,Warrior Hornet

        {FLAG_VARIANT6 ragged}
        {GOLD 160 180 200}
        {INCOME 10 12 14}

        {HORNET_AI (fighter,fighter,scout,mixed fighter)}
    [/side]

    [side]
        side=3
        controller=ai
        team_name=enemies
        user_team_name= _ "team_name^Hornets"

        type=Great Hornet
        id=Xrier
        name= _ "Xrier"
        canrecruit=yes

        recruit=Assault Hornet,Walking Corpse,Hornet,Warrior Hornet

        {FLAG_VARIANT6 ragged}
        {GOLD 140 160 180}
        {INCOME 8 10 12}

        {HORNET_AI (fighter,fighter,fighter,mixed fighter,mixed fighter)}
    [/side]

    [side]
        side=4
        controller=ai
        team_name=enemies
        user_team_name= _ "team_name^Hornets"

        type=Great Hornet
        id=Arial
        name= _ "Arial"
        canrecruit=yes

        recruit=Walking Corpse,Hornet,Warrior Hornet

        {FLAG_VARIANT6 ragged}
        {GOLD 160 180 200}
        {INCOME 10 12 14}

        {HORNET_AI (fighter)}
    [/side]

    {RECRUIT_UNIT_VARIATIONS 3,4 "Walking Corpse" ant,spider}

#undef HORNET_AI

    [side]
        side=5
        controller=null
        team_name=heroes
        user_team_name= _ "team_name^Valois"

        no_leader=yes
        hidden=yes

        share_vision=none

        {FLAG_VARIANT loyalist}
    [/side]

    [side]
        side=6
        controller=ai
        team_name=enemies
        user_team_name= _ "team_name^Valois"

        no_leader=yes
        hidden=yes

        recruit=Ghost

        {GOLD 40 60 80}
        {NO_INCOME}

        {FLAG_VARIANT undead}

        [ai]
            grouping=no
            aggression=1.0
            caution=0.2

            # Avoid attacks against dummies
            [attacks]
                invalidate_on_gamestate_change=yes
                [filter_own]
                    side=6
                [/filter_own]
                [filter_enemy]
                    side=1
                [/filter_enemy]
            [/attacks]
        [/ai]
    [/side]

    {STARTING_VILLAGES_ALL 2}
    {STARTING_VILLAGES 1 4}
    {STARTING_VILLAGES 3 3}
    {STARTING_VILLAGES 4 5}

    #
    # NOTE: Structured in several stages:
    #
    #   1. Battle
    #   2. Baku
    #   3. Daydream
    #       3A. Beginning
    #       3B. Kaldyn
    #       3C. Dragochan
    #       3D. Noaille
    #       3E. Valois
    #   4. End
    #

    [event]
        name=prestart
        [objectives]
            [objective]
                description= _ "Enter Marie into the heart of enemies"
                condition=win
            [/objective]

            [objective]
                description= _ "Death of Marie"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Noaille"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Dragochan"
                condition=lose
            [/objective]
            [objective]
                description= _ "Destruction of Kaldyn"
                condition=lose
            [/objective]

            {TURNS_RUN_OUT}

            [gold_carryover]
                bonus=no
                carryover_percentage=40
            [/gold_carryover]

            {SCENARIO_STAGE_NOTE 1 ( _ "Battle")}
        [/objectives]

#ifdef EASY
        {LOYAL_UNIT 2 (Hornet) 8 7} {GUARDIAN}
        {LOYAL_UNIT 2 (Hornet) 7 11} {GUARDIAN}
        {LOYAL_UNIT 2 (Hornet) 8 17} {GUARDIAN}
        {LOYAL_UNIT 2 (Hornet) 13 9} {GUARDIAN}
#else
        {LOYAL_UNIT 2 (Assault Hornet) 8 7} {GUARDIAN}
        {LOYAL_UNIT 2 (Assault Hornet) 7 11} {GUARDIAN}
        {LOYAL_UNIT 2 (Assault Hornet) 8 17} {GUARDIAN}
        {LOYAL_UNIT 2 (Assault Hornet) 13 9} {GUARDIAN}
#endif

        {VARIABLE in_daydream no}

        [recall]
            id=Noaille
            x,y=24,17
        [/recall]
        [recall]
            id=Dragochan
            x,y=23,18
        [/recall]
        [recall]
            id=Kaldyn
            x,y=23,19
        [/recall]

        {MODIFY_UNIT (side=1) facing nw}
    [/event]

    [event]
        name=start
        [fire_event]
            name=daydream stage 1
        [/fire_event]
    [/event]

    ###########################################################################
    #                                STAGE 1                                  #
    ###########################################################################

    [event]
        name=daydream stage 1

        [message]
            speaker=Marie
            message= _ "At last, we’ve reached the enemy’s capital. Valois must be hiding inside that mansion. What a coward — making her hornets fight to the death while she holed up all by herself."
        [/message]
        [message]
            speaker=Dragochan
            message= _ "This has been a long struggle... Yet the day has now come to avenge your mother."
        [/message]
        [message]
            speaker=Marie
            message= _ "Yes. I’m truly grateful to all of you. Noaille, Dragochan, Kaldyn..."
        [/message]
        [message]
            speaker=Dragochan
            message= _ "Hey, no need to thank us so formally. We’re not exactly going to meet our end right now, are we? You bees are fighting to stay alive, and so are I and Kaldyn."
        [/message]
        [message]
            speaker=Marie
            message= _ "... I think exactly so, Dragochan."
        [/message]

        {HIGHLIGHT_IMAGE 2 1 items/gohere.png ()}

        [message]
            speaker=Noaille
            message= _ "Once the mansion’s guards are dealt with, entering the premises should be no trouble at all."
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "Hold on, I sense a faint trace of magic in our intended direction... Something dangerous might be waiting for us. We must not let our vigilance wane."
        [/message]

        [recall]
            id=Clovis
            x,y=24,19
        [/recall]

        [message]
            speaker=Clovis
            message= _ "I see... So we’re finally moving in on the heart of enemies. Come out, everybody!"
        [/message]

        [recall]
            id=Yoshie
            x,y=25,18
        [/recall]
        [recall]
            id=Imorin
            x,y=25,19
        [/recall]
    [/event]

    # Pseudo "enemies defeated" for stage 1
    [event]
        name=die
        first_time_only=no
        [filter]
            id=Rudie,Xrier,Arial
        [/filter]

        [kill]
            id=$unit.id
            fire_event=no
        [/kill]
        [if]
            [have_unit]
                id=Rudie,Xrier,Arial
            [/have_unit]
            [else]
                [message]
                    speaker=Marie
                    message= _ "The path to the entrance is now open. Come on, go!"
                [/message]
            [/else]
        [/if]
    [/event]

    [event]
        name=moveto

        [filter]
            id=Marie
            x,y=2,1
        [/filter]
        [filter_condition]
            [variable]
                name=in_daydream
                boolean_equals=no
            [/variable]
            [or]
                [have_unit]
                    [not]
                        side=5,6
                    [/not]
                [/have_unit]
            [/or]
        [/filter_condition]

        [remove_item]
            x,y=$x1,$y1
        [/remove_item]

        [redraw][/redraw]

        [message]
            speaker=unit
            message= _ "Follow me!"
        [/message]

        [fire_event]
            name=daydream stage 2
        [/fire_event]
    [/event]

    ###########################################################################
    #                                STAGE 2                                  #
    ###########################################################################

    [event]
        name=daydream stage 2

        {FADE_OUT_MUSIC}

        # Use [store_unit] as [hide_unit] sometimes causes unknown issues in this scenario

        {STORE_UNIT (id=Marie) Marie_store yes}
        {STORE_UNIT (id=Noaille) Noaille_store yes}
        {STORE_UNIT (id=Dragochan) Dragochan_store yes}
        {STORE_UNIT (id=Kaldyn) Kaldyn_store yes}

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie,Noaille,Dragochan,Kaldyn
            [/not]
        )}

        {FADE_TO_BLACK}

        [replace_map]
            map_file=10_Daydream_Memories_02.map
            expand=yes
            shrink=yes
        [/replace_map]
        [replace_schedule]
            {UNDERGROUND}
        [/replace_schedule]

        {DELAY 250}

        [scroll_to]
            x,y=12,12
            immediate=yes
        [/scroll_to]

        {FADE_IN}

        {UNSTORE_UNIT Marie_store (x,y=12,12)}
        {UNSTORE_UNIT Noaille_store (x,y=11,13)}
        {UNSTORE_UNIT Dragochan_store (x,y=12,13)}
        {UNSTORE_UNIT Kaldyn_store (x,y=13,13)}

        {FULL_HEAL (side=1)}

        {DELAY 750}

        [message]
            speaker=Noaille
            message= _ "This is quite a strange place."
        [/message]

        {QUAKE "rumble.ogg"}
        {QUAKE "rumble.ogg"}

        [unit]
            type=Spectre
            id=Baku
            name= _ "Baku"
            side=6
            canrecruit=yes
#ifdef HARD
            hitpoints=80
            max_hitpoints=80
#else
            hitpoints=60
            max_hitpoints=60
#endif
            moves=3
            max_moves=3
            [modifications]
                [object]
                    duration=scenario
                    [effect]
                        apply_to=halo
                        halo="halo/fire-aura.png"
                    [/effect]
                [/object]

                {TEAM_COLOR_OVERRIDE () black}
            [/modifications]
            x,y=4,4
            animate=yes
        [/unit]

        {LOYAL_UNIT 6 (Ghost) 6 7} {GUARDIAN}
        {LOYAL_UNIT 6 (Ghost) 9 6} {GUARDIAN}

        [modify_side]
            side=2,3,4
            hidden=yes
        [/modify_side]
        [modify_side]
            side=6
            {INCOME 2 4 6}
        [/modify_side]

        {REPLACE_SCENARIO_MUSIC "underground.ogg"}

        {QUAKE "rumble.ogg"}

        [message]
            speaker=Dragochan
            message= _ "Whoa! Who the hell are you?"
            scroll=no
        [/message]
        [message]
            speaker=Baku
            message= _ "<i>I am Baku, heir to Lady Valois’ magic, and her faithful servant.</i>"
        [/message]
        [message]
            speaker=Noaille
            message= _ "Then, you won’t let us pass beyond this point, right?"
        [/message]
        [message]
            speaker=Baku
            message= _ "<i>Destroying intruders is my noble duty.</i>"
        [/message]
        [message]
            speaker=Dragochan
            message= _ "Hah! You’re the one who’ll be destroyed! Better change your attitude now and let us in..."
        [/message]

        [sound]
            name=wail.wav
        [/sound]

        {DELAY 250}

        [message]
            speaker=Kaldyn
            message= _ "He’s the source of the magic I sensed! His magical power permeates this entire room. He must have been granted a portion of Valois’ power."
        [/message]
        [message]
            speaker=Marie
            message= _ "Just defeat him and that’s enough, no?"
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "But his magic is formidable! Having once wielded the dark arts myself, I know what I’m saying. You’d better be careful..."
        [/message]

        [modify_side]
            side=1
            village_gold=0
            {NO_INCOME}
        [/modify_side]

        [modify_turns]
            value=-1
        [/modify_turns]

        [objectives]
            [objective]
                description= _ "Defeat Baku"
                condition=win
            [/objective]

            [objective]
                description= _ "Death of Marie"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Noaille"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Dragochan"
                condition=lose
            [/objective]
            [objective]
                description= _ "Destruction of Kaldyn"
                condition=lose
            [/objective]

            {HAS_NO_TURN_LIMIT}

            [gold_carryover]
                bonus=no
                carryover_percentage=40
            [/gold_carryover]

            {SCENARIO_STAGE_NOTE 2 ( _ "Baku")}
        [/objectives]
    [/event]

    [event]
        name=last breath
        [filter]
            id=Baku
        [/filter]

        {QUAKE "rumble.ogg"}

        [message]
            speaker=Marie
            message= _ "We vanquished the spectre! Hurry in—"
        [/message]

        [heal_unit]
            [filter]
                id=Baku
            [/filter]

            amount=full
            animate=yes
        [/heal_unit]

        {REPLACE_SCENARIO_MUSIC "silence.ogg"}

        [message]
            speaker=unit
            message= _ "<i><b>DO YOU WANNA DIE SO MUCH?</b></i>"
        [/message]

        {QUAKE "rumble.ogg"}
        {QUAKE "rumble.ogg"}

        [sound]
            name=explosion.ogg
        [/sound]

        {FLASH_RED (
            [harm_unit]
                [filter]
                    side=1
                    [not]
                        id=Kaldyn
                    [/not]
                [/filter]
                amount=666
                kill=no
            [/harm_unit]
            [harm_unit]
                [filter]
                    id=Kaldyn
                [/filter]
                amount=24
                kill=no
                slowed=yes
            [/harm_unit]
        )}

        {QUAKE "rumble.ogg"}

        [message]
            speaker=Kaldyn
            message= _ "MARIE—"
        [/message]

        {QUAKE "rumble.ogg"}
        {QUAKE "rumble.ogg"}

        [message]
            speaker=unit
            message= _ "Your magical form protects you. But that too will soon end."
            sound=fuse.ogg
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "Wait!"
        [/message]

        [sound]
            name=dragonstick.ogg
        [/sound]

        {STORE_UNIT (id=Marie) Marie_store yes}
        {STORE_UNIT (id=Noaille) Noaille_store yes}
        {STORE_UNIT (id=Dragochan) Dragochan_store yes}
        {STORE_UNIT (id=Kaldyn) Kaldyn_store yes}
        {STORE_UNIT (id=Baku) Baku_store yes}

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie,Noaille,Dragochan,Kaldyn,Baku
            [/not]
        )}

        {QUAKE "rumble.ogg"}

        {COLOR_ADJUST 500 -500 -500}

        {FAKE_SPEAKER ( _ "Kaldyn") ( _ "<small><b>I will destroy you, no matter what!</b></small>")}
        {FAKE_SPEAKER ( _ "Kaldyn") ( _ "<small>Wait for me, Marie...</small>")}

        [sound]
            name=magic-dark-big-miss.ogg
        [/sound]

        {FAKE_SPEAKER ( _ "Kaldyn") ( _ "...")}

        [sound]
            name=magic-dark-big.ogg
        [/sound]

        {COLOR_ADJUST -500 -500 -500}

        {DELAY 2000}

        {FAKE_SPEAKER ( _ "Marie")             ( _ "What on earth is this...")}
        {FAKE_SPEAKER ( _ "Mysterious Voice")  ( _ "<i>Let me invite you on a journey through memories.</i>")}
        {FAKE_SPEAKER ( _ "Marie")             ( _ "... You’re what...")}
        {FAKE_SPEAKER ( _ "Mysterious Voice")  ( _ "<i>Have sweet dreams.</i>")}

        [sound]
            name=wail-long.ogg
        [/sound]

        {DELAY 750}

        [fire_event]
            name=daydream stage 3a
        [/fire_event]
    [/event]

    ###########################################################################
    #                                STAGE 3                                  #
    ###########################################################################

    [event]
        name=daydream stage 3a

        [replace_map]
            map_file=10_Daydream_Memories_03.map
            expand=yes
            shrink=yes
        [/replace_map]
        [replace_schedule]
            {NIGHTMARE}
        [/replace_schedule]

        [modify_side]
            side=1
            shroud=yes
            fog=yes
        [/modify_side]

        {VARIABLE Marie_store.profile unit_image}

        [scroll_to]
            x,y=31,24
            immediate=yes
        [/scroll_to]

        {FADE_IN}

        {UNSTORE_UNIT Marie_store (x,y=31,24)}

        {FULL_HEAL (id=Marie)}
        [+heal_unit]
            restore_attacks=yes
        [/heal_unit]

        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 1000}

        {FAKE_SPEAKER ( _ "Marie") ( _ "...")}

        {REPLACE_SCENARIO_MUSIC "breeze.ogg"}

        {DELAY 1000}

        [message]
            speaker=Marie
            message= _ "Where am I? The Land of the Dead? Or... as that voice said, is this a dream?"
        [/message]
        [message]
            speaker=Marie
            message= _ "... Anyway, I can’t be gone yet."
        [/message]

        [random_placement]
            num_items={ON_DIFFICULTY 3 5 7}
            variable=loc
            min_distance=3
            [filter_location]
                x,y=25,21
                radius=5
            [/filter_location]
            [command]
                {RANDOM "Soulless,Soulless,Ghost"}
                [unit]
                    side=6
                    type=$random
                    variation=spider
                    x,y=$loc.x,$loc.y
                    passable=yes
                    ai_special=guardian
                    animate=yes
                [/unit]
                {CLEAR_VARIABLE random}
            [/command]
        [/random_placement]

        {GENERIC_UNIT 5 (Princess Bee) 17 18}
        [+unit]
            profile=unit_image
            generate_name=no
        [/unit]

        {GENERIC_UNIT 5 (Bee) 20 18}
        [+unit]
            profile=unit_image
            generate_name=no
        [/unit]

        [objectives]
            [objective]
                description= _ "Find a way to return"
                condition=win
            [/objective]

            {HAS_NO_TURN_LIMIT}

            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]

            {SCENARIO_STAGE_NOTE 3 ( _ "Daydream")}
        [/objectives]

        {VARIABLE in_daydream yes}
    [/event]

    # Marie will never die at this stage
    [event]
        name=attack end

        [filter_condition]
            [variable]
                name=in_daydream
                boolean_equals=yes
            [/variable]
        [/filter_condition]

        [message]
            speaker=Marie
            message= _ "It’s strange, even when attacked, it seems completely unaffected. This isn’t reality after all..."
        [/message]
    [/event]
    [event]
        name=attacker hits,defender hits
        first_time_only=no

        [filter_condition]
            [variable]
                name=in_daydream
                boolean_equals=yes
            [/variable]
        [/filter_condition]

        [heal_unit]
            [filter]
                id=Marie
            [/filter]
            amount=full
        [/heal_unit]
    [/event]

    [event]
        name=sighted
        [filter]
            side=5
        [/filter]
        [filter_second]
            id=Marie
        [/filter_second]

        [message]
            speaker=unit
            message= _ "Hello, Princess Marie. We are on your side. Please come this way."
        [/message]
        [message]
            speaker=second_unit
            message= _ "... Why are you here?"
        [/message]
        [message]
            speaker=unit
            message= _ "<i>Please come this way.</i>"
        [/message]

        [remove_shroud]
            side=1
            x,y=16,20
            radius=1
        [/remove_shroud]

        [redraw]
            clear_shroud=yes
        [/redraw]

        {HIGHLIGHT_IMAGE 16 20 items/gohere.png ()}

        [message]
            speaker=second_unit
            message= _ "<i>She’s probably an enemy agent. But obeying her is the only clue to escape from here...</i>"
        [/message]
    [/event]

    [event]
        name=moveto

        [filter]
            id=Marie
            x,y=16,20
        [/filter]
        [filter_condition]
            [variable]
                name=in_daydream
                boolean_equals=yes
            [/variable]
        [/filter_condition]

        [remove_item]
            x,y=$x1,$y1
        [/remove_item]

        [redraw][/redraw]

        {FADE_OUT_MUSIC}

        [message]
            speaker=unit
            message= _ "..."
        [/message]

        [fire_event]
            name=daydream stage 3b
        [/fire_event]
    [/event]

    [event]
        name=daydream stage 3b

        [sound]
            name=wail-sml.wav
        [/sound]

        {STORE_UNIT (id=Marie) Marie_backup no}
        {STORE_UNIT (id=Marie) Marie_store yes}

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie
            [/not]
        )}

        {FADE_TO_BLACK}

        [replace_schedule]
            {DUSK}
        [/replace_schedule]

        [modify_side]
            side=1
            fog=no
        [/modify_side]

        {VARIABLE Marie_store.name ( _ "Kaldyn")}
        {VARIABLE Marie_store.gender male}
        {VARIABLE Marie_store.type "Dark Sorcerer"}
        {VARIABLE Marie_store.profile "portraits/humans/dark-adept.webp~SEPIA()"}
        {VARIABLE Marie_store.facing nw}

        {DELAY 1000}

        [message]
            speaker=narrator
            message= _ "<i>That was a very sad memory.</i>"
            image=wesnoth-icon.png
        [/message]

        [scroll_to]
            x,y=32,13
            immediate=yes
        [/scroll_to]

        {FADE_IN}

        {UNSTORE_UNIT Marie_store (x,y=32,13)}

        {FULL_HEAL (id=Marie)}

        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 1000}

        {FAKE_SPEAKER ( _ "Marie") ( _ "This place...")}

        {MODIFY_UNIT (id=Marie) facing se}

        {DELAY 1000}

        {MODIFY_UNIT (id=Marie) facing nw}

        {DELAY 1000}

        {FAKE_SPEAKER ( _ "Marie") ( _ "Why am I in Kaldyn’s form?")}
        {FAKE_SPEAKER ( _ "Marie") ( _ "... Could this really be his memory...")}

        {REPLACE_SCENARIO_MUSIC "revelation.ogg"}

        [unit]
            type=Mage
            gender=female
            id=Flora
            name= _ "Flora"
            profile="portraits/humans/mage+female.webp~SEPIA()"
            side=5
            [modifications]
                {TRAIT_DEXTROUS}
                {TRAIT_INTELLIGENT}
                {TRAIT_LOYAL_HERO_NOSLOT}
            [/modifications]
            x,y=27,8
            facing=se
        [/unit]

        [objectives]
            [objective]
                description= _ "Meet your sister"
                condition=win
            [/objective]

            {HAS_NO_TURN_LIMIT}

            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]

            {SCENARIO_STAGE_NOTE 3 ( _ "Daydream")}
        [/objectives]

        {UNLIMITED_PLAYER_MOVES}
    [/event]

    [event]
        name=moveto

        [filter]
            id=Marie
            [filter_adjacent]
                id=Flora
            [/filter_adjacent]
        [/filter]

        [message]
            speaker=Flora
            message= _ "Welcome home, dear brother."
        [/message]
        [message]
            speaker=Marie
            message= _ "Flora, I need to talk to you."
        [/message]
        [message]
            speaker=Flora
            message= _ "... What?"
        [/message]
        [message]
            speaker=Marie
            message= _ "You really shouldn’t be with me after all."
        [/message]
        [message]
            speaker=Flora
            message= _ "That story again?"
        [/message]
        [message]
            speaker=Marie
            message= _ "I’m serious. Unlike me, you haven’t committed any sins of necromancy. If you go back now and explain carefully, the people back home will surely understand. You have far more talent for magic than I do. You shouldn’t end up on this island."
        [/message]
        [message]
            speaker=Flora
            message= _ "I’m here by MY own free will!"
        [/message]

        {MOVE_UNIT (id=Flora) 25 8}

        [message]
            speaker=Marie
            message= _ "Flora."
        [/message]

        {MOVE_UNIT (id=Marie) 27 8}

        [message]
            speaker=Flora
            message= _ "I don’t want to be apart from you, brother..."
        [/message]
        [message]
            speaker=Marie
            message= _ "..."
        [/message]

        [remove_shroud]
            side=1
            x,y=23,3
            radius=1
        [/remove_shroud]

        [redraw]
            clear_shroud=yes
        [/redraw]

        [unit]
            type=Elvish Lord
            id=Young Clovis
            name= _ "Clovis"
            profile="portraits/elves/captain.webp~SEPIA()"
            side=6
            [modifications]
                {TRAIT_DEXTROUS}
                {TRAIT_RESILIENT}
                {TEAM_COLOR_OVERRIDE () teal}
            [/modifications]
            x,y=23,3
            facing=se
            animate=yes
        [/unit]
        [unit]
            type=Elvish Marksman
            id=Lmiol
            name= _ "Lmiol"
            profile="portraits/elves/ranger.webp~SEPIA()"
            side=6
            x,y=23,4
            facing=ne
            animate=yes
        [/unit]
        [unit]
            type=Elvish Sorceress
            id=Sendra
            name= _ "Sendra"
            profile="portraits/elves/shaman.webp~SEPIA()"
            side=6
            x,y=24,3
            facing=sw
            animate=yes
        [/unit]

        [message]
            speaker=Young Clovis
            message= _ "I still oppose it... Has that necromancer ever done anything evil? He hasn’t even raised a single dead yet."
        [/message]
        [message]
            speaker=Lmiol
            message= _ "Such a sorcerer is a sin in existence itself! He must be killed at once. Why would you try to shield him?"
        [/message]
        [message]
            speaker=Young Clovis
            message= _ "I’m just saying we shouldn’t get involved. It’s wiser not to provoke him. Besides, his sister is still young, isn’t she?"
        [/message]
        [message]
            speaker=Lmiol
            message= _ "You’re conducting your own dubious research on flames, so you probably sympathize with him, huh? If that’s the case, you’re dangerous too. And of course, I can’t let his sister live either."
        [/message]
        [message]
            speaker=Sendra
            message= _ "Further discussion is pointless. We will commence our surprise attack."
        [/message]
        [message]
            speaker=Young Clovis
            message= _ "Do whatever you want. I’m leaving."
        [/message]
        [message]
            speaker=Young Clovis
            message= _ "However, if such arrogance as yours continues, we elves of this island will face ruin. That’s the trouble."
        [/message]

        [kill]
            id=Young Clovis
            fire_event=no
        [/kill]
        [move_unit_fake]
            side=5
            type=Elvish Lord
            x=23,23
            y=3,2
        [/move_unit_fake]

        {DELAY 250}

        [message]
            speaker=Lmiol
            message= _ "You’re the arrogant one, Clovis."
        [/message]

        [hide_unit]
            id=Lmiol,Sendra
        [/hide_unit]

        [redraw][/redraw]

        {MOVE_UNIT (id=Flora) 25 6}

        [message]
            speaker=Flora
            message= _ "So you just think I’m getting in your way?"
        [/message]
        [message]
            speaker=Marie
            message= _ "No... I’m saying it for your own sake."
        [/message]
        [message]
            speaker=Flora
            message= _ "Lies! I..."
        [/message]

        {TELEPORT_UNIT (id=Lmiol) 24 6}

        [sound]
            name=magic-faeriefire.ogg
        [/sound]

        [unhide_unit]
            id=Lmiol
        [/unhide_unit]

        [message]
            speaker=Flora
            message= _ "<i><b>!</b></i>"
        [/message]
        [message]
            speaker=Lmiol
            message= _ "... Die, necromancer!"
        [/message]
        [message]
            speaker=Flora
            message= _ "Brother, HELP―"
        [/message]

        {FAKE_ATTACK_ANIM Lmiol Flora (range=ranged)}

        [harm_unit]
            [filter]
                id=Flora
            [/filter]
            amount=24
            kill=no
        [/harm_unit]

        [message]
            speaker=Marie
            message= _ "NO! She is NOT a necromancer!"
        [/message]

        {MOVE_UNIT (id=Marie) 26 7}

        [kill]
            id=Flora
            fire_event=no
            animate=yes
        [/kill]

        [message]
            speaker=Marie
            message= _ "... I am the necromancer..."
        [/message]

        {TELEPORT_UNIT (id=Sendra) 27 7}

        [unhide_unit]
            id=Sendra
        [/unhide_unit]

        {FAKE_ATTACK_ANIM Sendra Marie (type=arcane)}

        [harm_unit]
            [filter]
                id=Marie
            [/filter]
            amount=60
            kill=no
        [/harm_unit]

        {QUAKE "rumble.ogg"}

        [message]
            speaker=Marie
            message= _ "Even in death, I’ll kill you... cursed islanders..."
        [/message]

        {QUAKE "rumble.ogg"}
        {QUAKE "rumble.ogg"}

        [fire_event]
            name=daydream stage 3c
        [/fire_event]
    [/event]

    [event]
        name=daydream stage 3c

        {STORE_UNIT (id=Marie) Marie_store yes}

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie
            [/not]
        )}

        {FAKE_SPEAKER ( _ "Marie") ( _ "Kaldyn... No way...")}
        {FAKE_SPEAKER ( _ "Marie") ( _ "... I never imagined you’d ever go through such a painful time...")}

        {FADE_TO_BLACK}

        [replace_schedule]
            {FIRST_WATCH}
        [/replace_schedule]

        {VARIABLE Marie_store.name ( _ "Grelnit")}
        {VARIABLE Marie_store.type "Drake Flare"}
        {VARIABLE Marie_store.profile "portraits/drakes/burner.webp~SEPIA()"}
        {VARIABLE Marie_store.hitpoints 8}
        {VARIABLE Marie_store.moves 4}
        {VARIABLE Marie_store.max_moves 4}

        {APPEND_MUSIC "sad.ogg"}

        {DELAY 1000}

        [message]
            speaker=narrator
            message= _ "<i>Next to appear was a memory of empty loss.</i>"
            image=wesnoth-icon.png
        [/message]

        [scroll_to]
            x,y=9,23
            immediate=yes
        [/scroll_to]

        {FADE_IN}

        {UNSTORE_UNIT Marie_store (x,y=9,23)}

        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 500}

        {FAKE_SPEAKER ( _ "Grelnit") ( _ "Umm...")}

        [unit]
            type=Naga Ringcaster
            id=Silas
            name= _ "Silas"
            profile="portraits/nagas/naga-ringcaster.webp~SEPIA()"
            side=6
            canrecruit=yes
            x,y=10,23
            facing=nw
            animate=yes
        [/unit]
        [unit]
            type=Saurian Augur
            generate_name=no
            profile="portraits/saurians/augur.webp~SEPIA()"
            side=6
            x,y=10,22
            facing=sw
            animate=yes
        [/unit]

        [message]
            speaker=Silas
            message= _ "Oh, you’re still alive after being roasted this much? That’s drake all right."
        [/message]
        [message]
            speaker=Marie
            message= _ "Until I return to my clan with news of your existence, I shall not die."
        [/message]
        [message]
            speaker=Silas
            message= _ "What a hassle."
        [/message]
        [message]
            type=Saurian Augur
            message= _ "Then let me try casting that memory-loss spell I’ve been meaning to attempt?"
        [/message]
        [message]
            speaker=Silas
            message= _ "It’s a great idea, but will it succeed?"
        [/message]
        [message]
            type=Saurian Augur
            message= _ "When it fails, just kill him."
        [/message]
        [message]
            speaker=Marie
            message= _ "... Wait! NO!"
        [/message]

        [sound]
            name=magic-dark.ogg
        [/sound]

        {STORE_UNIT (id=Marie) Marie_store yes}

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie
            [/not]
        )}

        {COLOR_ADJUST 500 -500 -500}

        {FAKE_SPEAKER ( _ "Marie") ( _ "Dragochan...")}
        {FAKE_SPEAKER ( _ "Marie") ( _ "This is the memory sleeping deep within your heart...")}

        {FADE_OUT_MUSIC}

        [fire_event]
            name=daydream stage 3d
        [/fire_event]
    [/event]

    [event]
        name=daydream stage 3d

        {COLOR_ADJUST -500 -500 -500}

        [replace_schedule]
            {NIGHTMARE}
        [/replace_schedule]

        [modify_side]
            side=1
            fog=yes
        [/modify_side]

        {CLEAR_VARIABLE Marie_store}

        [scroll_to]
            x,y=4,17
            immediate=yes
        [/scroll_to]

        [message]
            speaker=narrator
            message= _ "<i>The last one to approach her was...</i>"
            image=wesnoth-icon.png
        [/message]
        [message]
            speaker=narrator
            message= _ "<i>... a memory of a homeland...</i>"
            image=wesnoth-icon.png
        [/message]
        [message]
            speaker=narrator
            message= _ "<i>... that feels somehow wrong.</i>"
            sound=wail-sml.wav
            image=wesnoth-icon.png
        [/message]

        [sound]
            name=wail-long.wav
        [/sound]

        {DELAY 1000}

        {FADE_IN}

        {UNSTORE_UNIT Marie_backup (x,y=4,17)}

        {FULL_HEAL (id=Marie)}

        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 1000}

        [message]
            speaker=Marie
            message= _ "I have to return to everyone..."
        [/message]
        [message]
            speaker=Marie
            message= _ "... Noaille..."
        [/message]

        [unit]
            type=Princess Bee
            id=Fake Melissa
            name= _ "Melissa"
            profile="portraits/queen-younger.png~SEPIA()"
            side=5
            random_traits=no
            [modifications]
                {TRAIT_LOYAL_HERO_NOSLOT}
            [/modifications]
            x,y=13,11
        [/unit]
        [unit]
            type=Worker Bee
            id=Fake Noaille
            name= _ "Noaille"
            profile="portraits/bee.png~SEPIA()"
            side=5
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_QUICK}

                {TRAIT_LOYAL}
                [+trait]
                    male_name=""
                    female_name=""
                [/trait]
            [/modifications]
            x,y=13,12
        [/unit]

        {MODIFY_UNIT (side=5) facing ne}

        [objectives]
            [objective]
                description= _ "Find Noaille"
                condition=win
            [/objective]

            {HAS_NO_TURN_LIMIT}

            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]

            {SCENARIO_STAGE_NOTE 3 ( _ "Daydream")}
        [/objectives]
    [/event]

    [event]
        name=sighted

        [filter]
            id=Fake Noaille
        [/filter]
        [filter_second]
            id=Marie
        [/filter_second]

        [remove_shroud]
            side=1
            x,y=14,11
            radius=2
        [/remove_shroud]
        [remove_shroud]
            side=1
            x,y=14,7
            radius=2
        [/remove_shroud]

        [lift_fog]
            x,y=14,11
            radius=2
        [/lift_fog]
        [lift_fog]
            x,y=14,7
            radius=2
        [/lift_fog]

        [redraw]
            clear_shroud=yes
        [/redraw]

        [message]
            speaker=Marie
            message= _ "Noaille is there. But she’s different from always."
        [/message]

        [scroll_to]
            x,y=14,11
        [/scroll_to]

        {DELAY 250}

        [unit]
            type=New Queen Bee
            id=Fake Valois
            name= _ "Valois"
            profile="portraits/queen-older.png~SEPIA()"
            side=5
            canrecruit=yes
            x,y=14,11
            facing=sw
            animate=yes
        [/unit]

        {REPLACE_SCENARIO_MUSIC "underground.ogg"}

        [message]
            speaker=Fake Noaille
            message= _ "Princess Valois, I’d rather we shouldn’t."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "Why are you saying such a thing, Noaille?"
        [/message]

        [sound]
            name=wail.wav
        [/sound]

        {DELAY 250}

        [message]
            speaker=Marie
            message= _ "<i>Was Valois a bee?!</i>"
        [/message]
        [message]
            speaker=Marie
            message= _ "No, it’s impossible for my kingdom’s kin to commit such evil! This must be nothing but an illusion..."
        [/message]
        [message]
            speaker=Fake Melissa
            message= _ "But sister, there’s nothing we can do about mother’s illness."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "<i><b>That’s why I’m trying to cure her!</b></i>"
        [/message]
        [message]
            speaker=Marie
            message= _ "Is she my mom’s sister? NO..."
        [/message]
        [message]
            speaker=Marie
            message= _ "... Noaille never said any such thing..."
        [/message]

        [unit]
            type=Queen Bee
            id=Elder Queen
            generate_name=no
            side=5
            x,y=14,7
            canrecruit=yes
            hitpoints=4
        [/unit]
        [unit]
            type=TBJ Queen Ant
            id=Fake Belania
            name= _ "Belania"
            profile="portraits/monsters/ant-firebomb.webp~SEPIA()"
            side=5
            canrecruit=yes
            x,y=13,7
        [/unit]

        [message]
            speaker=Fake Melissa
            message= _ "I’m sad too... But we must not defy the laws of nature... Your magic should not be used."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "Don’t you love our Mother Queen?!"
        [/message]
        [message]
            speaker=Fake Melissa
            message= _ "Of course I love her! How could you say such a cruel thing!"
        [/message]
        [message]
            speaker=Fake Noaille
            message= _ "Princess, your magic is dangerous, and things may happen that even you cannot foresee. First and foremost, where did the spirit who taught you that magic go? That being is not one of our island’s benevolent spirits."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "That’s not any matter. I’ll use my power to heal my mother. That’s final!"
        [/message]
        [message]
            speaker=Fake Melissa
            message= _ "STOP HER!"
        [/message]

        {MOVE_UNIT (id=Fake Valois) 14 8}

        [message]
            speaker=Fake Belania
            message= _ "Princess Valois, what are you trying to do to her? Stop it!"
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "None of your business!"
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "Mother, don’t worry! I’ll save you!"
        [/message]
        [message]
            speaker=Elder Queen
            message= _ "<i><b>?</b></i>"
            image=none
        [/message]

        {FAKE_ATTACK_ANIM (Fake Valois) (Elder Queen) (range=ranged)}

        [heal_unit]
            [filter]
                id=Elder Queen
            [/filter]
            amount=2
            animate=yes
        [/heal_unit]

        [message]
            speaker=Fake Valois
            message= _ "Yes! Now I can..."
        [/message]

        {REPLACE_SCENARIO_MUSIC "silence.ogg"}

        [message]
            speaker=Elder Queen
            message= _ "<i><b><big>ARGH!</big></b></i>"
            image=none
        [/message]

        [sound]
            name=magic-dark-big-miss.ogg
        [/sound]

        {STORE_UNIT (id=Marie) Marie_store yes}

        [hide_unit]
            [not]
                id=Marie
            [/not]
        [/hide_unit]

        [kill]
            id=Elder Queen
            fire_event=no
        [/kill]

        [sound]
            name={SOUND_LIST:ELF_FEMALE_HIT}
        [/sound]

        {COLOR_ADJUST -500 -500 -500}

        {DELAY 2000}

        [message]
            speaker=narrator
            caption= _ "Melissa"
            message= _ "Valois... you..."
            image="portraits/queen-younger.png~SEPIA()"
        [/message]
        [message]
            speaker=narrator
            caption= _ "Valois"
            message= _ "... NO... I..."
            image="portraits/queen-older.png~SEPIA()"
        [/message]

        [sound]
            name=magic-dark-big.ogg
        [/sound]

        {DELAY 1000}

        [sound]
            name=zombie-attack.wav
        [/sound]

        {FADE_IN}

        [unhide_unit]
        [/unhide_unit]

        [unit]
            type=Walking Corpse
            id=Dead Queen
            variation=ant
            side=6
            x,y=14,7
            canrecruit=yes
        [/unit]

        {DELAY 2500}

        [sound]
            name={SOUND_LIST:ZOMBIE_HIT}
        [/sound]

        [fire_event]
            name=daydream stage 3e
        [/fire_event]
    [/event]

    [event]
        name=daydream stage 3e

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie
            [/not]
        )}

        [kill]
            id=Fake Valois
            fire_event=no
        [/kill]

        {FADE_TO_BLACK}

        [modify_side]
            side=1
            fog=no
        [/modify_side]

        {DELAY 1000}

        {FAKE_SPEAKER ( _ "Valois")  ( _ "Why? Why am I the one getting banished?")}
        {FAKE_SPEAKER ( _ "Melissa") ( _ "... Several months have passed since the queen’s death. Ask yourself what you have been doing all this time.")}
        {FAKE_SPEAKER ( _ "Valois")  ( _ "I continued my study in magic.")}
        {FAKE_SPEAKER ( _ "Noaille") ( _ "For that “study”, you killed three worker bees.")}
        {FAKE_SPEAKER ( _ "Valois")  ( _ "...")}
        {FAKE_SPEAKER ( _ "Belania") ( _ "We can’t allow anyone who has become a necromancer to remain on this island. There’s no other way.")}
        {FAKE_SPEAKER ( _ "Melissa") ( _ "I’m sorry, dear sister. However...")}
        {FAKE_SPEAKER ( _ "Valois")  ( _ "... <b>Enough.</b>")}

        [sound]
            name=wail-long.wav
        [/sound]

        {DELAY 750}

        [scroll_to]
            x,y=4,12
            immediate=yes
        [/scroll_to]

        {FADE_IN}

        [unit]
            type=New Queen Bee
            id=Fake Valois
            name= _ "Valois"
            profile="portraits/queen-older.png~SEPIA()"
            side=1
            canrecruit=yes
            x,y=4,10
            facing=se
            hitpoints=8
        [/unit]

        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 500}

        [message]
            speaker=Fake Valois
            message= _ "<i>Why... Why did such a tragedy...</i>"
        [/message]

        [sound]
            name=wail-sml.wav
        [/sound]

        [scroll_to]
            x,y=5,9
        [/scroll_to]

        [unit]
            type=Spirit
            id=Jeron
            name= _ "Jeron"
            side=6
            canrecruit=yes
            [modifications]
                {TEAM_COLOR_OVERRIDE () black}
            [/modifications]
            x,y=5,7
            facing=sw
            animate=yes
        [/unit]

        [message]
            speaker=Jeron
            message= _ "Oh, that’s just perfect."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "YOU! Because of the magic you taught me, I’ve fallen into darkness!"
        [/message]
        [message]
            speaker=Jeron
            message= _ "It’s your own fault for believing my lie outright."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "Shut up! At least I’ll kill you myself!"
        [/message]

        {MOVE_UNIT (id=Fake Valois) 4 7}

        [message]
            speaker=Jeron
            message= _ "Bad luck, I’m not just some weakling spirit..."
        [/message]

        {ADVANCE_UNIT (id=Jeron) (Ancient Lich)}

        [message]
            speaker=Jeron
            message= _ "I was searching for a new vessel for my soul. You were a good candidate, but meeting you again like this must be fate."
        [/message]
        [message]
            speaker=Jeron
            message= _ "I’ll become one with you."
        [/message]
        [message]
            speaker=Fake Valois
            message= _ "NO!"
        [/message]

        {FAKE_ATTACK_ANIM Jeron (Fake Valois) (name=shadow wave)}

        {FLASH_BLUE ()}

        [kill]
            id=Jeron
            fire_event=no
        [/kill]

        [redraw][/redraw]

        {MODIFY_UNIT (id=Fake Valois) side 6}

        {REPLACE_SCENARIO_MUSIC "calm-before-storm.ogg"}

        [message]
            speaker=Fake Valois
            message= _ "..."
        [/message]

        {THUNDER ()}

        [fire_event]
            name=daydream stage 4
        [/fire_event]
    [/event]

    ###########################################################################
    #                                STAGE 4                                  #
    ###########################################################################

    [event]
        name=daydream stage 4

        #
        # End point of S10
        #

        {PUT_TO_RECALL_LIST (
            [not]
                id=Marie
            [/not]
        )}

        {FADE_TO_BLACK}

        {DELAY 750}

        {FAKE_SPEAKER ( _ "Valois") ( _ "<i>I... I...</i>")}

        {DELAY 1000}

        {FAKE_SPEAKER ( _ "Valois") ( _ "<i><b>... I’ll take my revenge...</b></i>")}
        {FAKE_SPEAKER ( _ "Valois") ( _ "<i><b>... I’ll destroy the bees who banished me...</b></i>")}
        {FAKE_SPEAKER ( _ "Valois") ( _ "<i><b>... and reclaim what was lost.</b></i>")}

        [sound]
            name=wail-long.wav
        [/sound]

        {DELAY 1000}

        # Return to stage 2 map
        [replace_map]
            map_file=10_Daydream_Memories_02.map
            expand=yes
            shrink=yes
        [/replace_map]
        [replace_schedule]
            {UNDERGROUND}
        [/replace_schedule]

        [modify_side]
            side=1
            shroud=no
        [/modify_side]

        {VARIABLE Marie_store.profile "portraits/queen-younger.png"}

        [scroll_to]
            x,y=8,5
            immediate=yes
        [/scroll_to]

        {FAKE_SPEAKER ( _ "Marie")            ( _ "These are... all the memories...")}
        {FAKE_SPEAKER ( _ "Mysterious Voice") ( _ "Was it an interesting experience, my dear?")}
        {FAKE_SPEAKER ( _ "Marie")            ( _ "Not at all. Let me out of this daydream quickly. It’s too much for me.")}
        {FAKE_SPEAKER ( _ "Marie")            ( _ "Still, your memory seems pretty embellished. Aren’t you just playing the tragic heroine? I’m not falling for it.")}
        {FAKE_SPEAKER ( _ "Mysterious Voice") ( _ "I only entrusted a part of my memory to Baku. I have no idea what kind of scene you witnessed.")}
        {FAKE_SPEAKER ( _ "Marie")            ( _ "... You lying invader!")}
        {FAKE_SPEAKER ( _ "Mysterious Voice") ( _ "You stubborn girl. But eventually, you’ll come back to my hands, not Noaille’s.")}
        {FAKE_SPEAKER ( _ "Marie")            ( _ "<i><b>What do you mean, Valois!</b></i>")}
        {FAKE_SPEAKER ( _ "Kaldyn")           ( _ "<i><small>Marie!</small></i>")}

        [sound]
            name=dragonstick.ogg
        [/sound]

        {FAKE_SPEAKER ( _ "Kaldyn") ( _ "<i>Marie! <b>Come back!</b></i>")}
        {FAKE_SPEAKER ( _ "Marie")  ( _ "<i><small>Kaldyn!</small></i>")}

        [sound]
            name=magic-dark-big.ogg
        [/sound]

        {DELAY 500}

        {QUAKE "rumble.ogg"}

        [sound]
            name=explosion.ogg
        [/sound]

        {COLOR_ADJUST 0 0 0}

        {QUAKE "rumble.ogg"}
        {QUAKE "rumble.ogg"}

        {UNSTORE_UNIT Marie_store (x,y=11,7)}
        {UNSTORE_UNIT Noaille_store (x,y=10,7)}
        {UNSTORE_UNIT Dragochan_store (x,y=7,8)}

        {FULL_HEAL (side=1)}

        {VARIABLE Kaldyn_store.hitpoints 12}
        {VARIABLE Kaldyn_store.facing nw}

        {UNSTORE_UNIT Kaldyn_store (x,y=8,5)}

        {VARIABLE Baku_store.hitpoints 4}

        {UNSTORE_UNIT Baku_store (x,y=7,5)}

        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 750}

        [message]
            speaker=Baku
            message= _ "Augh... NO..."
            image=none
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "Receive the retribution that has invaded our hearts."
        [/message]

        {FAKE_ATTACK_ANIM Kaldyn Baku (type=cold)}

        [kill]
            id=Baku
            fire_event=no
            animate=yes
        [/kill]

        {DELAY 750}

        [message]
            speaker=Noaille
            message= _ "Umm..."
        [/message]
        [message]
            speaker=Dragochan
            message= _ "What the hell has been going on until now? My head is all... jumbled up."
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "Apparently, that spectre possessed the ability to peer into others’ hearts. Its magic transformed all memories into dreams, probably making Marie experience them."
        [/message]
        [message]
            speaker=Dragochan
            message= _ "I see. In other words, your fears about his magical power were justified after all."
        [/message]
        [message]
            speaker=Marie
            message= _ "..."
        [/message]

        {DELAY 250}

        [message]
            speaker=Dragochan
            message= _ "Marie, are you okay? Kaldyn saved you just now."
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "If the dreams had continued, they might have eventually taken control of your soul. So glad I could wake you up."
        [/message]
        [message]
            speaker=Marie
            message= _ "... I... I might have thought I was the only one suffering. I might have been arrogant..."
        [/message]
        [message]
            speaker=Kaldyn
            message= _ "Marie?"
        [/message]
        [message]
            speaker=Marie
            message= _ "... I’m okay. Kaldyn, Dragochan, thank you for helping me all this time. I truly mean it."
        [/message]
        [message]
            speaker=Dragochan
            message= _ "Didn’t I tell you no need for thanks? Well, I’ll take your feelings anyway."
        [/message]

        {DELAY 1000}

        [message]
            speaker=Marie
            message= _ "... By the way, Noaille..."
        [/message]
        [message]
            speaker=Noaille
            message= _ "What?"
        [/message]
        [message]
            speaker=Marie
            message= _ "There’s something I need to ask you."
        [/message]

        {CLEAR_VARIABLE in_daydream}

        [endlevel]
            result=victory
            bonus=no
            carryover_report=no
            {NEW_GOLD_CARRYOVER 40}
        [/endlevel]
    [/event]
[/scenario]
